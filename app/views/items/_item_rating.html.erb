
<div class="card-deck">
        <div class="card text-center bg-light rounded-0 border-0">
            <div class="card-body">
                <h4>Average item rating
                    <button class="btn btn-secondary btn-sm mt-1 ml-1" type="button" data-toggle="collapse" data-target="#ratingComments" aria-expanded="false" aria-controls="ratingComments">
                        <span class="fas fa-caret-down"></span>
                    </button>
                </h4>
                <h2 class="pb-3 bold"><%= @item.average_rating %> <small>/ 5</small></h2>
                <% @item.rating_stars.times do %>
                    <button type="button" class="btn btn-warning btn-sm" aria-label="Left Align">
                        <span class="fas fa-star" aria-hidden="true"></span>
                    </button>
                <% end %>
                <% @item.rating_blanks.times do %>
                    <button type="button" class="btn btn-default btn-grey btn-sm" aria-label="Left Align">
                        <span class="fas fa-star" aria-hidden="true"></span>
                    </button>
                <% end %>
            </div>
        </div>
        <div class="card border-0 rounded-0">
            <div class="card-body">
                <h4>Rating breakdown</h4>
                <div class="row d-flex" style="align-items: center;">
                    <div class="col-2 px-0 text-center">
                        5
                        <span class="fas fa-star"></span>
                    </div>
                    <div class="col-8 px-0" style="">
                        <div class="progress float-none" style="height:9px;">
                            <div class="progress-bar bg-success w-100" role="progressbar" aria-valuenow="5" aria-valuemin="0" aria-valuemax="5"></div>
                        </div>
                    </div>
                    <div class="col-2 px-0 text-center" style="">
                        <%= @item.rating_count 5 %>
                    </div>
                </div>
                <div class="row d-flex" style="align-items: center;">
                    <div class="col-2 px-0 text-center">
                        4
                        <span class="fas fa-star"></span>
                    </div>
                    <div class="col-8 px-0" style="">
                        <div class="progress float-none" style="height:9px;">
                            <div class="progress-bar bg-primary w-80" role="progressbar" aria-valuenow="4" aria-valuemin="0" aria-valuemax="5"></div>
                        </div>
                    </div>
                    <div class="col-2 px-0 text-center" style="">
                        <%= @item.rating_count 4 %>
                    </div>
                </div>
                <div class="row d-flex" style="align-items: center;">
                    <div class="col-2 px-0 text-center">
                        3
                        <span class="fas fa-star"></span>
                    </div>
                    <div class="col-8 px-0" style="">
                        <div class="progress float-none" style="height:9px;">
                            <div class="progress-bar bg-info w-60" role="progressbar" aria-valuenow="3" aria-valuemin="0" aria-valuemax="5"></div>
                        </div>
                    </div>
                    <div class="col-2 px-0 text-center" style="">
                        <%= @item.rating_count 3 %>
                    </div>
                </div>
                <div class="row d-flex" style="align-items: center;">
                    <div class="col-2 px-0 text-center">
                        2
                        <span class="fas fa-star"></span>
                    </div>
                    <div class="col-8 px-0" style="">
                        <div class="progress float-none" style="height:9px;">
                            <div class="progress-bar bg-warning w-40" role="progressbar" aria-valuenow="2" aria-valuemin="0" aria-valuemax="5"></div>
                        </div>
                    </div>
                    <div class="col-2 px-0 text-center" style="">
                        <%= @item.rating_count 2 %>
                    </div>
                </div>
                <div class="row d-flex" style="align-items: center;">
                    <div class="col-2 px-0 text-center">
                        1
                        <span class="fas fa-star"></span>
                    </div>
                    <div class="col-8 px-0" style="">
                        <div class="progress float-none" style="height:9px;">
                            <div class="progress-bar bg-danger w-20" role="progressbar" aria-valuenow="1" aria-valuemin="0" aria-valuemax="5"></div>
                        </div>
                    </div>
                    <div class="col-2 px-0 text-center" style="">
                        <%= @item.rating_count 1 %>
                    </div>
                </div>
            </div>
        </div>
</div>

<div class="row collapse" id="ratingComments">
    <div class="col-sm-12">
        <hr/>
        <h3 class="text-center">Top Comments</h3>
        <% @item.ratings.each do |rating| %>
            <div class="card w-100 bg-light rounded-0">
                <div class="card-body">
                    <div class="row">
                        <div class="col-sm-3">
                            <%= raw(get_picture(rating.user, "img-fluid rounded-circle")) %>
                            <div class="review-block-name">
                                <a href="javascript:void();"><%= rating.user.profile.name %></a>
                            </div>
                            <div class="review-block-date">
                                <%= rating.updated_at.strftime("Rated on %m/%d/%Y") %>
                            </div>
                        </div>
                        <div class="col-sm-9">
                            <div class="review-block-rate">
                                <% rating.score.times do %>
                                    <button type="button" class="btn btn-warning btn-xs" aria-label="Left Align">
                                        <span class="fas fa-star" aria-hidden="true"></span>
                                    </button>
                                <% end %>
                                <% (5 - rating.score).times do %>
                                    <button type="button" class="btn btn-default btn-grey btn-xs" aria-label="Left Align">
                                        <span class="fas fa-star" aria-hidden="true"></span>
                                    </button>
                                <% end %>
                            </div>
                            <div class="review-block-description">
                                <% rating.comment %>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        <% end %>
    </div>
</div>
